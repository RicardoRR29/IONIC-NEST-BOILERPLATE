<ion-content class="users-wrapper" fullscreen>
  <div class="users-container">

    <!-- Cabeçalho -->
    <div class="header-section">
      <h1 class="text-title-xl">Gerenciamento de Usuários</h1>
      <p class="text-muted">Sistema de autenticação seguro com JWT</p>
    </div>

    <!-- Cards de Resumo -->
    <div class="stats-cards">
      <ion-card>
        <ion-card-content>
          <h3>Total de Usuários</h3>
          <p>{{ users.length }}</p>
        </ion-card-content>
      </ion-card>
      <ion-card>
        <ion-card-content>
          <h3>Usuário Logado</h3>
          <p>{{ currentUser?.name }}<br /><small>{{ currentUser?.email }}</small></p>
        </ion-card-content>
      </ion-card>
      <ion-card>
        <ion-card-content>
          <h3>Autenticação</h3>
          <p>JWT Ativo</p>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Ações -->
    <div class="actions-bar">
      <ion-searchbar
        [(ngModel)]="search"
        placeholder="Buscar por nome ou email..."
        class="user-search"
      ></ion-searchbar>

      <ion-button (click)="addUser()" class="btn-primary" shape="round">
        <ion-icon slot="start" name="person-add-outline"></ion-icon>
        Novo Usuário
      </ion-button>
    </div>

    <!-- Tabela -->
    <ion-card class="table-wrapper">
      <ion-card-content>
        <table class="user-table">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Email</th>
              <th style="width: 1%; ">Ações</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of filteredUsers()">
              <td>
                {{ user.name }}
                <ion-badge *ngIf="user.email === currentUser?.email" color="primary">Você</ion-badge>
              </td>
              <td>{{ user.email }}</td>
                <td class="tableactions-buttons" >
                <ion-button
                  fill="clear"
                  size="small"
                  color="primary"
                  (click)="editUser(user)"
                >
                  <ion-icon name="create-outline" slot="icon-only"></ion-icon>
                </ion-button>
                <ion-button
                  fill="clear"
                  size="small"
                  color="danger"
                  (click)="deleteUser(user)"
                >
                  <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
                </ion-button>
                </td>
            </tr>
          </tbody>
        </table>
      </ion-card-content>
    </ion-card>

    <!-- Modais -->
    <app-add-user-modal #addModal (userCreated)="userAdded($event)"></app-add-user-modal>
    <app-edit-user-modal #editModal (userUpdated)="userUpdated($event)"></app-edit-user-modal>
  </div>
</ion-content>
